# 服务器配置
server:
  port: 8090
  # 增加超时设置，适应模型调用的长耗时
  servlet:
    context-path: /
    session:
      timeout: 60s
  tomcat:
    connection-timeout: 60000
    keep-alive-timeout: 60000

# 缓存配置
spring:
  cache:
    type: caffeine
    caffeine:
      spec: maximumSize=1000,expireAfterWrite=1h
  # 应用名称配置
  application:
    name: ai-overview-backend
  # Spring AI 配置（默认使用DeepSeek）
  ai:
    openai:
      api-key: ${DEEPSEEK_API_KEY}
      base-url: https://api.deepseek.com
      chat:
        options:
          model: deepseek-chat
          temperature: 0.7
          max-tokens: 8000
    # GLM 配置（通过环境变量）
    glm:
      api-key: ${GLM_API_KEY}
      base-url: https://open.bigmodel.cn/api/paas/v4
      chat:
        options:
          model: glm-4.7-flash
          temperature: 0.7
          max-tokens: 65536

# Prometheus配置
management:
  metrics:
    export:
      prometheus:
        enabled: true
  # Actuator端点配置
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

mybatis:
  mapper-locations: classpath*:mapper/*.xml
  type-aliases-package: com.aioverview.backend.aidemo.model
  configuration:
    map-underscore-to-camel-case: true

# 日志配置
logging:
  level:
    root: INFO